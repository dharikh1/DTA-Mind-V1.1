FROM node:20-alpine

WORKDIR /app

# Copy package files
COPY package*.json ./
COPY packages/*/package*.json ./packages/

# Install pnpm
RUN npm install -g pnpm

# Show what we're copying
RUN ls -la
RUN cat package.json | grep -A 5 -B 5 "nodevm" || echo "No nodevm in root package.json"
RUN cat packages/components/package.json | grep -A 5 -B 5 "nodevm" || echo "No nodevm in components package.json"

# Try to install dependencies
RUN pnpm install --frozen-lockfile=false
